import{d as b,ai as x,aj as C,as as B,U as E,f as g,h as c,w as s,b as t,at as I,o as i,e as N,g as f,ae as T,t as V,al as j,ap as A,aq as D,ar as M}from"./index-576c5820.js";import"./LoadingSfc-4ed993c7.js";import{u as r,_ as P}from"./index-e0979790.js";const R=n=>(A("data-v-0ae8fe77"),n=n(),D(),n),q={class:"card"},z=R(()=>f("h3",null,"正在登录至",-1)),Q={key:1},U=b({__name:"Login",setup(n){const{push:l}=x(),m=C(),_=r("code",""),e=r("from"),d=r("method"),u=(o,a)=>{a?window.location.href=a:l("/profile")},h=()=>{if(d.value==="github")return{github:{code:_.value}};const o=window.atob(_.value).split(":");return{email:{email:o[0]??"",password:o[1]??""}}},{mutate:v,loading:L,onError:y,onDone:k}=B({variables:{by:h()}});return k(o=>{console.log(`[onLoginSuccess] ${o.data}`),o.data&&u(!1,e.value),console.log(o.errors)}),y(o=>{console.log("[onLoginError] "),console.log(o.message),l("/")}),E(()=>{m.get()?u(!1,e.value):d.value&&v()}),(o,a)=>{const w=P,p=j,S=I;return i(),g("div",q,[c(S,{loading:t(L),type:"wave",size:"large"},{description:s(()=>[c(p,{direction:"column"},{default:s(()=>[t(e)?(i(),N(p,{key:0,justify:"center"},{default:s(()=>[z,f("h3",null,[c(w,{type:"info",href:t(e).toString()},{default:s(()=>[T(V(t(e)),1)]),_:1},8,["href"])])]),_:1})):(i(),g("h3",Q,"正在登录"))]),_:1})]),_:1},8,["loading"])])}}});const H=M(U,[["__scopeId","data-v-0ae8fe77"]]);export{H as default};
