import{d as x,a7 as C,a8 as b,a9 as B,a6 as E,ah as I,ai as N,b as p,f as c,w as s,aa as n,aj as R,o as i,a as T,e as g,a2 as V,t as j,ae as D,af as M,ag as z}from"./index-98d1b897.js";import"./LoadingSfc-4ed993c7.js";import{_ as A}from"./space-8afa1630.js";import{u as r,_ as P}from"./index-db6ea7ee.js";const Q=a=>(D("data-v-00605967"),a=a(),M(),a),$={class:"card"},q=Q(()=>g("h3",null," 正在登录至 ",-1)),F={key:1},G=x({__name:"Login",setup(a){const{push:f}=C(),m=b(),l=r("code",""),e=r("from"),_=r("method");B(),E({code:l.value});const u=(o,t)=>{t?window.location.href=t:f("/profile")},h=()=>_.value==="1"?{github:{code:l.value}}:{email:{email:"",password:""}},{mutate:v,loading:L,onError:y,onDone:k}=I({variables:{by:h()}});return k(o=>{console.log(`[onLoginSuccess] ${o.data}`),o.data&&u(!1,e.value),console.log(o.errors)}),y(o=>{console.log("[onLoginError] "),console.log(o.message)}),N(()=>{m.get()?u(!1,e.value):_.value&&v()}),(o,t)=>{const S=P,d=A,w=R;return i(),p("div",$,[c(w,{loading:n(L),type:"wave",size:"large"},{description:s(()=>[c(d,{direction:"column"},{default:s(()=>[n(e)?(i(),T(d,{key:0,justify:"center"},{default:s(()=>[q,g("h3",null,[c(S,{type:"info",href:n(e).toString()},{default:s(()=>[V(j(n(e)),1)]),_:1},8,["href"])])]),_:1})):(i(),p("h3",F," 正在登录 "))]),_:1})]),_:1},8,["loading"])])}}});const U=z(G,[["__scopeId","data-v-00605967"]]);export{U as default};
