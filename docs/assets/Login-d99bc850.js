import{d as S,a7 as x,a8 as C,ah as B,ai as E,b as f,f as c,w as s,aa as t,aj as I,o as i,a as N,e as g,a2 as T,t as V,ae as j,af as A,ag as D}from"./index-479d2dd4.js";import"./LoadingSfc-4ed993c7.js";import{_ as M}from"./space-17833af4.js";import{u as r,_ as P}from"./index-fb162b25.js";const R=n=>(j("data-v-fcbbe89c"),n=n(),A(),n),z={class:"card"},Q=R(()=>g("h3",null,"正在登录至",-1)),$={key:1},q=S({__name:"Login",setup(n){const{push:l}=x(),m=C(),_=r("code",""),e=r("from"),d=r("method"),u=(o,a)=>{a?window.location.href=a:l("/profile")},h=()=>{if(d.value==="github")return{github:{code:_.value}};const o=window.atob(_.value).split(":");return{email:{email:o[0]??"",password:o[1]??""}}},{mutate:v,loading:b,onError:L,onDone:y}=B({variables:{by:h()}});return y(o=>{console.log(`[onLoginSuccess] ${o.data}`),o.data&&u(!1,e.value),console.log(o.errors)}),L(o=>{console.log("[onLoginError] "),console.log(o.message),l("/")}),E(()=>{m.get()?u(!1,e.value):d.value&&v()}),(o,a)=>{const k=P,p=M,w=I;return i(),f("div",z,[c(w,{loading:t(b),type:"wave",size:"large"},{description:s(()=>[c(p,{direction:"column"},{default:s(()=>[t(e)?(i(),N(p,{key:0,justify:"center"},{default:s(()=>[Q,g("h3",null,[c(k,{type:"info",href:t(e).toString()},{default:s(()=>[T(V(t(e)),1)]),_:1},8,["href"])])]),_:1})):(i(),f("h3",$,"正在登录"))]),_:1})]),_:1},8,["loading"])])}}});const K=D(q,[["__scopeId","data-v-fcbbe89c"]]);export{K as default};
