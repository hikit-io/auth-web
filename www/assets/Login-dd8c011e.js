import{d as w,a7 as x,a8 as C,a9 as B,a6 as E,ah as I,ai as N,b as p,f as c,w as s,aa as n,aj as R,o as i,a as T,e as g,a2 as V,t as j,ae as D,af as M,ag as z}from"./index-1352081c.js";import"./LoadingSfc-4ed993c7.js";import{_ as A}from"./space-f2306b8a.js";import{u as r,_ as P}from"./index-1f4e78ee.js";const Q=a=>(D("data-v-23bae048"),a=a(),M(),a),$={class:"card"},q=Q(()=>g("h3",null," 正在登录至 ",-1)),F={key:1},G=w({__name:"Login",setup(a){const{push:f}=x(),m=C(),l=r("code",""),o=r("from"),_=r("method");B(),E({code:l.value});const u=(e,t)=>{t?window.location.href=t:f("/profile")},h=()=>_.value==="1"?{github:{code:l.value}}:{email:{email:"",password:""}},{mutate:v,loading:L,onError:y,onDone:k}=I({variables:{by:h()}});return k(e=>{console.log(`[onLoginSuccess] ${e.data}`),e.data&&u(!1,o.value),console.log(e.errors)}),y(e=>{console.log("[onLoginError] "),console.log(e.message)}),N(()=>{m.get()?u(!1,o.value):_.value&&v()}),(e,t)=>{const S=P,d=A,b=R;return i(),p("div",$,[c(b,{loading:n(L),type:"wave",size:"large"},{description:s(()=>[c(d,{direction:"column"},{default:s(()=>[n(o)?(i(),T(d,{key:0,justify:"center"},{default:s(()=>[q,g("h3",null,[c(S,{type:"info",href:n(o).toString()},{default:s(()=>[V(j(n(o)),1)]),_:1},8,["href"])])]),_:1})):(i(),p("h3",F," 正在登录 "))]),_:1})]),_:1},8,["loading"])])}}});const U=z(G,[["__scopeId","data-v-23bae048"]]);export{U as default};
